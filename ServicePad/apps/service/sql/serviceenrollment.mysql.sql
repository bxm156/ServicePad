INSERT INTO `service_serviceenrollment` (`id`, `user_id`, `team_id`, `event_id`, `start`, `end`, `enrollment_time`, `approved`)
VALUES
	(16, 2, 3, 3, '2012-01-15 11:00:00', '2012-01-15 12:00:00', '2012-12-10 05:22:15', 0),
	(15, 10, 3, 3, '2012-01-15 11:00:00', '2012-01-15 12:00:00', '2012-12-10 05:22:15', 0),
	(14, 4, 3, 3, '2012-01-15 11:00:00', '2012-01-15 12:00:00', '2012-12-10 05:22:15', 0),
	(7, 10, NULL, 2, '2012-02-09 10:00:00', '2012-02-09 12:30:00', '2012-12-10 05:11:23', 0),
	(1, 9, NULL, 2, '2012-02-09 10:00:00', '2012-02-09 13:00:00', '2012-12-10 05:07:47', 0),
	(10, 2, NULL, 2, '2012-02-10 11:00:00', '2012-02-10 13:00:00', '2012-12-10 05:12:36', 0),
	(11, 2, NULL, 2, '2012-02-11 11:00:00', '2012-02-11 12:30:00', '2012-12-10 05:13:11', 0),
	(8, 10, NULL, 2, '2012-02-11 11:45:00', '2012-02-11 13:00:00', '2012-12-10 05:11:46', 0),
	(12, 2, NULL, 6, '2012-02-22 11:00:00', '2012-02-22 16:00:00', '2012-12-10 05:14:24', 0),
	(27, 2, 3, 6, '2012-05-12 11:00:00', '2012-05-12 15:00:00', '2012-12-10 05:42:41', 0),
	(28, 9, 3, 6, '2012-05-12 11:00:00', '2012-05-12 15:00:00', '2012-12-10 05:42:41', 0),
	(26, 10, 3, 6, '2012-05-12 11:00:00', '2012-05-12 15:00:00', '2012-12-10 05:42:41', 0),
	(25, 4, 3, 6, '2012-05-12 11:00:00', '2012-05-12 15:00:00', '2012-12-10 05:42:41', 0),
	(21, 10, 3, 6, '2012-05-13 11:00:00', '2012-05-13 15:00:00', '2012-12-10 05:37:48', 0),
	(20, 4, 3, 6, '2012-05-13 11:00:00', '2012-05-13 15:00:00', '2012-12-10 05:37:48', 0),
	(23, 9, 3, 6, '2012-05-13 11:00:00', '2012-05-13 15:00:00', '2012-12-10 05:37:48', 0),
	(22, 2, 3, 6, '2012-05-13 11:00:00', '2012-05-13 15:00:00', '2012-12-10 05:37:48', 0),
	(2, 9, NULL, 6, '2012-06-12 12:00:00', '2012-06-12 17:00:00', '2012-12-10 05:08:31', 0),
	(3, 9, NULL, 6, '2012-08-23 10:00:00', '2012-08-23 15:00:00', '2012-12-10 05:08:55', 0),
	(6, 10, NULL, 5, '2012-11-22 11:15:00', '2012-11-22 13:00:00', '2012-12-10 05:10:53', 0),
	(24, 8, NULL, 4, '2012-12-02 11:00:00', '2012-12-02 15:00:00', '2012-12-10 05:39:12', 0),
	(33, 1, 1, 6, '2012-12-10 03:00:00', '2012-12-10 06:00:00', '2012-12-10 06:05:59', 2),
	(19, 1, NULL, 1, '2012-12-10 09:00:00', '2012-12-10 10:00:00', '2012-12-10 05:24:49', 1),
	(13, 3, 1, 1, '2012-12-10 09:00:00', '2012-12-10 10:00:00', '2012-12-10 05:24:32', 1),
	(35, 10, 3, 6, '2012-12-10 04:10:00', '2012-12-10 13:00:00', '2012-12-10 05:50:18', 1),
	(34, 4, 3, 6, '2012-12-10 04:30:00', '2012-12-10 13:00:00', '2012-12-10 05:50:16', 1),
	(36, 2, 3, 6, '2012-12-10 03:55:00', '2012-12-10 13:00:00', '2012-12-10 05:50:14', 1),
	(5, 10, NULL, 1, '2012-12-10 11:45:00', '2012-12-10 14:30:00', '2012-12-10 05:24:32', 1),
	(9, 2, NULL, 1, '2012-12-10 10:00:00', '2012-12-10 16:00:00', '2012-12-10 05:26:26', 1),
	(4, 9, NULL, 7, '2012-12-10 17:00:00', '2012-12-10 19:00:00', '2012-12-10 05:09:20', 0),
	(17, 10, 3, 4, '2012-12-21 14:00:00', '2012-12-21 17:30:00', '2012-12-10 05:24:33', 1),
	(18, 9, 3, 4, '2012-12-21 14:00:00', '2012-12-21 17:30:00', '2012-12-10 05:25:41', 1),
	(29, 4, 3, 6, '2012-12-24 11:00:00', '2012-12-24 15:00:00', '2012-12-10 05:43:25', 0),
	(31, 2, 3, 6, '2012-12-24 11:00:00', '2012-12-24 15:00:00', '2012-12-10 05:43:25', 0),
	(32, 9, 3, 6, '2012-12-24 11:00:00', '2012-12-24 15:00:00', '2012-12-10 05:43:25', 0),
	(30, 10, 3, 6, '2012-12-24 11:00:00', '2012-12-24 15:00:00', '2012-12-10 05:43:25', 0);

CREATE TRIGGER validate_enrollment_hours
BEFORE INSERT ON service_serviceenrollment
FOR EACH ROW
BEGIN 
	DECLARE event_start datetime; --
	DECLARE event_end datetime; --
	SELECT start_time, end_time INTO event_start, event_end FROM events_event WHERE id = NEW.event_id; --
	IF NEW.start < event_start OR NEW.end > event_end OR NEW.start > NEW.end THEN
		SIGNAL SQLSTATE '45000'
		SET MESSAGE_TEXT = 'Invalid Start/End Time', MYSQL_ERRNO = 1001; --
	END IF; --
END; --